<img src="./assert/网约车稳定性实践/image-20211118190421835.png" alt="image-20211118190421835" style="zoom:50%;" />



# 一、定义

降低故障次数，频率越低，可靠性越高；故障出现后，降低恢复时间，增加可用性。 `稳定性 = 可靠性 + 可用性`

- 可靠性

系统可以无故障的持续运行，是一个持续状态。
关注系统可以无故障的持续运行的概率，关注的是故障率。

- 可用性

根据时间段而不是任何时刻来进行定义。
系统在给定时间内总体的运行时间越长，可用性越高。



### 1.衡量指标

> 可用性

<img src="./assert/网约车稳定性实践/image-20211118191104695.png" alt="image-20211118191104695" style="zoom:50%;" />

> 可靠性

![image-20211118191348483](./assert/网约车稳定性实践/image-20211118191348483.png)

> 量化
![image-20211118191508027](./assert/网约车稳定性实践/image-20211118191508027.png)

# 二、挑战

### 1.业务特点

- 交易实时性强
- 节假日效应
- 天气效应明显
- 基础属性强
- 容易产生纠纷
- 社会责任感重

### 2.服务拓扑

业务发复杂度高、服务链路长、依赖服务多、接口耗时长

![image-20211118191929539](./assert/网约车稳定性实践/image-20211118191929539.png)

### 3.服务变更多
![image-20211118192234415](./assert/网约车稳定性实践/image-20211118192234415.png)

# 三、机制建设

底线要求：定军规、强意识、降发生

分等级：有强制、有建议

### 1.底线要求

![image-20211118192409159](./assert/网约车稳定性实践/image-20211118192409159.png)

### 2.开发规范

- 代码规范
- 包管理规范
- 日志规范
- 配置中心使用规范
- CodeReview规范
- SDK开发规范
- ......



### 3. 事故通报和复盘

事故不可避免，重要的是我们能够从中汲取什么样的教训，如何避免事故再次发生。

![image-20211118193043159](./assert/网约车稳定性实践/image-20211118193043159.png)

### 3.发布流程SOP

![image-20211118193359527](./assert/网约车稳定性实践/image-20211118193359527.png)

### 4. 持续运营

持续宣传教育，宣传提高意识

![image-20211118193451227](./assert/网约车稳定性实践/image-20211118193451227.png)

# 四、能力建设

### 1. 为什么搞研发框架

统一框架，业务自选型容易提高运维成本以及错误定位成本，而且每个业务标准不同，不能统一管理，而且容易造成“轮子”的重复建设。

![image-20211118193547048](./assert/网约车稳定性实践/image-20211118193547048.png)

![image-20211118193806846](./assert/网约车稳定性实践/image-20211118193806846.png)



### 2. 文档 SDK 标准化

sdk自动化、标准化、规范化，文档自动生成对齐SDK，重新定义开发规范

![image-20211118194032881](./assert/网约车稳定性实践/image-20211118194032881.png)

### 3.性能分析平台

![image-20211118194437183](./assert/网约车稳定性实践/image-20211118194437183.png)



### 4. 创建研发生态

![image-20211118194523331](./assert/网约车稳定性实践/image-20211118194523331.png)



### 5.测试流程

> 测试环境

![image-20211118194724482](./assert/网约车稳定性实践/image-20211118194724482.png)



> 流量录制，流量回放

![image-20211118194947793](./assert/网约车稳定性实践/image-20211118194947793.png)

![image-20211118195037690](./assert/网约车稳定性实践/image-20211118195037690.png)



> 回调闭环

![image-20211118195346976](./assert/网约车稳定性实践/image-20211118195346976.png)

> 线下仿真环境

采用基准环境 + 开发环境的整体架构

![image-20211118195532692](./assert/网约车稳定性实践/image-20211118195532692.png)

> 流量控制

![image-20211118195844220](./assert/网约车稳定性实践/image-20211118195844220.png)



# 五、服务治理



### 1.可观测

![image-20211118200046976](./assert/网约车稳定性实践/image-20211118200046976.png)



### 2.Alert报警

定时更新报警规则，按照业务进行

![image-20211118200340535](./assert/网约车稳定性实践/image-20211118200340535.png)

### 3. 业务监控

![image-20211118201031807](./assert/网约车稳定性实践/image-20211118201031807.png)

### 4.trace和log

![image-20211118201142474](./assert/网约车稳定性实践/image-20211118201142474.png)

### 5.根因定位

![image-20211118201234731](./assert/网约车稳定性实践/image-20211118201234731.png)

### 6.预案能力建设

![image-20211118201455571](./assert/网约车稳定性实践/image-20211118201455571.png)

### 7.研发流程SOP

![image-20211118201535386](./assert/网约车稳定性实践/image-20211118201535386.png)

### 8.异地多活

![image-20211118201901927](./assert/网约车稳定性实践/image-20211118201901927.png)

### 9.总体目标

![image-20211118201555563](./assert/网约车稳定性实践/image-20211118201555563.png)
