# HTTP版本以及特点

## **HTTP/0.9：**

- HTTP协议的最初版本，功能简陋，仅支持请求方式GET，并且仅能请求访问HTML格式的资源。

## **HTTP/1.0：**

- 增加了请求方式POST和HEAD；
- 根据Content-Type可以支持多种数据格式；
- 开始支持cache 等

## **HTTP/1.1：**

- 引入了持久连接，TCP连接默认不关闭，可以被多个请求复用，不用声明`Connection: keep-alive`；
- 加入了管道机制，在同一个TCP连接里，允许多个请求同时发送，增加了并发性，进一步改善了HTTP协议的效率
- 新增了请求方式PUT、PATCH、OPTIONS、DELETE等

## **HTTP/2.0：**

- 增加双工模式，支持双向的、实时的通信
- 将所有的信息字段建立一张表，为表中的每个字段建立索引，客户端和服务端共同使用这个表，他们之间就以索引号来表示信息字段
- 增加服务器推送的功能，即不经请求服务端主动向客户端发送数据



# HTTP报文结构

![image-20210301171833306](/Users/afuka/Documents/Typora/服务端积累/assert/image-20210301171833306.png)

![img](/Users/afuka/Documents/Typora/服务端积累/assert/885859-20190724173230609-1990595514.png)

![img](/Users/afuka/Documents/Typora/服务端积累/assert/885859-20190724173242717-440362909.png)



# HTTPS通信过程

## 简介

**HTTPS协议 = HTTP协议 + SSL/TLS协议**，在HTTPS数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，需要用HTTP对加密后的数据进行传输。

## 加密传输

HTTPS为了兼顾安全与效率，**同时使用了对称加密和非对称加密**。数据是被对称加密传输的，对称加密过程需要客户端的一个密钥，为了确保能把该密钥安全传输到服务器端，采用非对称加密对该密钥进行加密传输，总的来说，**对数据进行对称加密，对称加密所要使用的密钥通过非对称加密传输**。



**HTTPS在传输的过程中会涉及到三个密钥：**

- 服务器端的公钥和私钥，用来进行非对称加密

- 客户端生成的随机密钥，用来进行对称加密



## 传输过程

一个HTTPS请求实际上包含了两次HTTP传输，可以细分为8步。

- 1.客户端向服务器发起HTTPS请求，连接到服务器的443端口

- 2.服务器端有一个密钥对，即公钥和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人。

- 3.服务器将自己的公钥发送给客户端。

- 4.客户端收到服务器端的证书之后，会对证书进行检查，验证其合法性，如果发现发现证书有问题，那么HTTPS传输就无法继续。严格的说，这里应该是验证服务器发送的数字证书的合法性，关于客户端如何验证数字证书的合法性，下文会进行说明。如果公钥合格，那么客户端会生成一个随机值，这个随机值就是用于进行对称加密的密钥，我们将该密钥称之为client key，即客户端密钥，这样在概念上和服务器端的密钥容易进行区分。然后用服务器的公钥对客户端密钥进行非对称加密，这样客户端密钥就变成密文了，至此，HTTPS中的第一次HTTP请求结束。

- 5.客户端会发起HTTPS中的第二个HTTP请求，将加密之后的客户端密钥发送给服务器。

- 6.服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文。

- 7.然后服务器将加密后的密文发送给客户端。

- 8.客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。这样HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。





![img](https://upload-images.jianshu.io/upload_images/627325-dc83fef6ac2e6c88.png?imageMogr2/auto-orient/strip|imageView2/2/format/webp)